tinymce.PluginManager.add("managetabs",function(e,E){var t,T,S,a,A,n={TAGS:{A:"A",UL:"UL",LI:"LI",DIV:"DIV",H4:"H4"},SELECTORS:{CLASS_TAB_NODE:"nav-tabs",CLASS_TAB_CONTENT:"tab-content",CLASS_TAB_PANE:"tab-pane",CLASS_TITLE_MORE_INFO:"accordion-toggle",ID_MORE_INFO:"panel-sections",CLASS_PANEL_CONTENT:"panel-collapse",CLASS_PANEL_NODE:"panel",CLASS_PANEL_TITLE:"panel-title",CLASS_STUDY_DEF:"study-definition",CLASS_INSERT_LINK:"mce-i-link",CLASS_STUDY_FRAME:"study-frame",CLASS_STUDY_TERM:"study-term"},ATTRIBUTES:{ID:"id",CLASS:"class",HREF:"href",DATA_MCE_HREF:"data-mce-href"},LANG:{NEW_TAB:"Nova pestanya",NEW_PANEL_INFO:"Nou panell",NEW_SECTION:"Nova secció",CONTENT_TAB:"<p>Contingut de la pestanya</p>",DELETE_TAB:"Estàs segur que vols esborrar la pestanya",CONTENT_PANEL:"<div><p>Text del panell</p></div>",DELETE_PANEL:"Estàs segur que vols esborrar el panell",DELETE_SECTION:"Estàs segur que vols esborrar la secció",CONTENT_SECTION:"<p>Text de la secció</p>"}};e.on("click",function(E){t=E.target,"A"==t.tagName&&(t.parentElement.className.indexOf(n.SELECTORS.CLASS_PANEL_TITLE)>-1||t.parentElement.className.indexOf(n.SELECTORS.CLASS_STUDY_DEF)>-1||"LI"==t.parentElement.tagName&&t.parentElement.parentElement.className.indexOf(n.SELECTORS.CLASS_TAB_NODE)>-1)&&(T=document.getElementsByClassName(n.SELECTORS.CLASS_INSERT_LINK)[0],T.parentElement.click()),t.tagName==n.TAGS.UL||t.tagName==n.TAGS.LI?t.tagName==n.TAGS.UL&&t.className.indexOf(n.SELECTORS.CLASS_TAB_NODE)>-1?(T=t.firstChild.cloneNode(!0),S=T.getElementsByTagName(n.TAGS.A)[0],a=Math.random().toString(36).substring(2,15),T.removeAttribute(n.ATTRIBUTES.CLASS),S.setAttribute(n.ATTRIBUTES.HREF,"#"+a),S.setAttribute(n.ATTRIBUTES.DATA_MCE_HREF,"#"+a),S.innerHTML=n.LANG.NEW_TAB,t.appendChild(T),S=e.getBody(),T=S.getElementsByClassName(n.SELECTORS.CLASS_TAB_CONTENT)[0],S=T.firstChild.cloneNode(!0),S.setAttribute(n.ATTRIBUTES.ID,a),S.className=n.SELECTORS.CLASS_TAB_PANE,S.innerHTML=n.LANG.CONTENT_TAB,T.appendChild(S)):t.tagName==n.TAGS.LI&&t.parentElement.className.indexOf(n.SELECTORS.CLASS_TAB_NODE)>-1&&(S=t.getElementsByTagName(n.TAGS.A)[0],confirm(n.LANG.DELETE_TAB+" '"+S.textContent+"'?")&&(A=S.getAttribute(n.ATTRIBUTES.DATA_MCE_HREF).slice(1),T=e.dom.get(A),t.parentElement.removeChild(t),T.parentElement.removeChild(T))):t.getAttribute("id")==n.SELECTORS.ID_MORE_INFO?(T=t.firstChild.cloneNode(!0),S=T.getElementsByClassName(n.SELECTORS.CLASS_TITLE_MORE_INFO)[0],a=Math.random().toString(36).substring(2,15),S.setAttribute(n.ATTRIBUTES.HREF,"#"+a),S.setAttribute(n.ATTRIBUTES.DATA_MCE_HREF,"#"+a),S.innerHTML=n.LANG.NEW_PANEL_INFO,S=T.getElementsByClassName(n.SELECTORS.CLASS_PANEL_CONTENT)[0],S.setAttribute(n.ATTRIBUTES.ID,a),S=S.firstChild,S.innerHTML=n.LANG.CONTENT_PANEL,t.appendChild(T)):t.parentElement.getAttribute("id")==n.SELECTORS.ID_MORE_INFO&&t.className.indexOf(n.SELECTORS.CLASS_PANEL_NODE)>-1?(S=t.getElementsByClassName(n.SELECTORS.CLASS_TITLE_MORE_INFO)[0],confirm(n.LANG.DELETE_PANEL+" '"+S.textContent+"'?")&&t.parentElement.removeChild(t)):t.tagName==n.TAGS.DIV&&t.className.indexOf(n.SELECTORS.CLASS_STUDY_TERM)>-1?(S=t.firstChild,confirm(n.LANG.DELETE_SECTION+" '"+S.textContent+"'?")&&t.parentElement.removeChild(t)):t.tagName==n.TAGS.DIV&&t.className.indexOf(n.SELECTORS.CLASS_STUDY_FRAME)>-1&&(T=t.getElementsByClassName(n.SELECTORS.CLASS_STUDY_TERM)[0].cloneNode(!0),S=T.getElementsByTagName(n.TAGS.H4)[0],S.innerHTML=n.LANG.NEW_SECTION,S=T.getElementsByClassName(n.SELECTORS.CLASS_STUDY_DEF)[0],S.innerHTML=n.LANG.CONTENT_SECTION,t.appendChild(T))})});